<#import "base.html" as b>

<@b.override "title">Profile</@b.override>

<@b.override "styles">
<link rel="stylesheet" href="styles/profile.css">
</@b.override>

<@b.override "assign">
<#assign avatar = (profile.avatarPath?? && profile.avatarPath != "")?then(profile.avatarPath,
"https://bootdey.com/img/Content/avatar/avatar7.png")>
<#assign about = (profile.about??)?then(profile.about, "")>
<#assign name = (profile.name??)?then(profile.name, "")>
<#assign lastName = (profile.lastname??)?then(profile.lastname, "")>
<#assign patronymic = (profile.patronymic??)?then(profile.patronymic, "")>
<#assign fullName = lastName + " " + name + " " + patronymic>
</@b.override>

<@b.override "main">
<div class="container">
    <div class="main-body">
        <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
                <div class="row">
                    <div class="col">
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <div class="user-avatar">
                                        <img src="${avatar}" alt="Avatar">
                                    </div>
                                    <div class="mt-3">
                                        <h4>${profile.username}</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card mt-2">
                            <div class="card-body">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <div class="mt-3">
                                        <h5>About</h5>
                                        <p>${about}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-8">
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-sm-3">
                                <h6 class="mb-0">Full Name</h6>
                            </div>
                            <div class="col-sm-9 text-secondary">
                                <#if fullName?length != 2>${fullName}<#else>Undefined
                            </#if>
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-sm-3">
                            <h6 class="mb-0">Email</h6>
                        </div>
                        <div class="col-sm-9 text-secondary">
                            ${profile.email}
                        </div>
                    </div>
                    <hr>
                    <div class="row">
                        <div class="col-sm-3">
                            <h6 class="mb-0">Registered at</h6>
                        </div>
                        <div class="col-sm-9 text-secondary">
                            ${profile.registeredAt}
                        </div>
                    </div>
                    <hr>

                    <div class="container">
                        <div class="float-left">
                            <a class="btn btn-info" href="/archinterest/preferences">Edit</a>
                            <a class="btn ml-2 btn-secondary" href="/archinterest/projects/create">Create project</a>
                            <a class="btn ml-2 btn-secondary" href="/archinterest/news/create">Create news</a>
                        </div>
                        <div class="float-right">
                            <a class="btn  btn-danger justify-content-md-right"
                               href="/archinterest/logout">Logout</a>

                        </div>
                    </div>
                </div>

                <h3 class="container">
                    <div class="row">
                        <div class="col">
                            <h5 class="">Interested tags</h5>
                        </div>
                    </div>
                    <div class="row align-items-start">
                        <#list tags as tag>
                        <div class="col-4 mb-1">
                            <div class="card">
                                <span class="m-2 list-group-item badge tm-bg-brown">${tag.title}</span>
                            </div>
                        </div>
                    </#list>
                </div>
            </div>
        </div>
    </div>
</@b.override>

<@b.override "active">
$('#nav-profile').removeClass('btn-outline-warning');
$('#nav-profile').addClass('btn-warning');</@b.override>

<@b.override "scripts">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
</@b.override>

<@b.template />